!function(){function e(e,t){t=t||{bubbles:!1,cancelable:!1,detail:void 0};var n=document.createEvent("CustomEvent");return n.initCustomEvent(e,t.bubbles,t.cancelable,t.detail),n}return"function"!=typeof window.CustomEvent&&(e.prototype=window.Event.prototype,void(window.CustomEvent=e))}(),function(){function dispatchEvents(){arguments.length<1&&console.error("Please provide at least one event");var e={},t=[],n=document.querySelectorAll("[data-haste-ajax-listeners]");Array.from(arguments).forEach(function(s){var r=!1;Array.from(n).forEach(function(t){t.dataset.hasteAjaxListeners.split(" ").indexOf(s)!==-1&&(r=!0,e[t.dataset.hasteAjaxId]=t)}),r&&t.push(s)}),Object.keys(e).length>0&&t.length>0&&t.forEach(function(t){sendRequest(e,t)})}function sendRequest(els,event){eventsInProgress[event]&&eventsInProgress[event].abort();for(var key in els)elementsInProgress[key]=event,els[key].classList.add("haste-ajax-reloading");var xhr=new XMLHttpRequest;xhr.open("GET",encodeURI(window.location.href)),xhr.setRequestHeader("X-Requested-With","XMLHttpRequest"),xhr.setRequestHeader("Haste-Ajax-Reload",event),xhr.onload=function(){if(200===xhr.status){var newEls={},entries=JSON.parse(xhr.responseText);Object.keys(entries).forEach(function(id){els[id]&&elementsInProgress[id]===event&&(els[id].outerHTML=entries[id],elementsInProgress[id]=null,newEls[id]=document.querySelector('[data-haste-ajax-id="'+id+'"]'),Array.from(newEls[id].getElementsByTagName("script")).forEach(function(script){eval(script.innerHTML)}))}),document.dispatchEvent(new CustomEvent("HasteAjaxReloadComplete",{bubbles:!1,cancelable:!1,detail:{entries:entries,event:event,oldElements:els,newElements:newEls}}))}else console.error('The request for event "'+event+'" has failed'),console.error(xhr);eventsInProgress[event]=null},xhr.send(),eventsInProgress[event]=xhr}var elementsInProgress={},eventsInProgress={};window.HasteAjaxReload={dispatchEvents:dispatchEvents}}();